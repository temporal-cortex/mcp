# Smithery directory configuration for Temporal Cortex MCP Server.
# Deterministic calendar tools for AI agents: temporal context, scheduling,
# availability merging, RRULE expansion, and Two-Phase Commit booking.
# See: https://smithery.ai/docs/publishing

startCommand:
  type: stdio
  configSchema:
    type: object
    title: Temporal Cortex MCP Server Configuration
    description: >-
      Configure calendar provider credentials and server behavior.
      All fields are optional â€” the server auto-detects timezone and
      launches an interactive OAuth flow when credentials are needed.
    properties:
      google_client_id:
        type: string
        title: Google Client ID
        description: Google OAuth2 Client ID for Calendar API access
        examples:
          - "123456789.apps.googleusercontent.com"
      google_client_secret:
        type: string
        title: Google Client Secret
        description: Google OAuth2 Client Secret
      timezone:
        type: string
        title: Timezone
        description: IANA timezone (e.g., America/New_York). Auto-detected from OS if not set.
        examples:
          - "America/New_York"
          - "Europe/London"
          - "Asia/Tokyo"
      tenant_id:
        type: string
        title: Tenant ID
        description: UUID for tenant isolation (auto-generated if not set)
        pattern: "^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$"
      lock_ttl_secs:
        type: number
        title: Lock TTL (seconds)
        description: Two-Phase Commit lock timeout in seconds
        default: 30
        minimum: 5
        maximum: 300
      microsoft_client_id:
        type: string
        title: Microsoft Client ID
        description: Azure AD application (client) ID for Outlook calendar access
      microsoft_client_secret:
        type: string
        title: Microsoft Client Secret
        description: Azure AD client secret for Outlook calendar access
      week_start:
        type: string
        title: Week Start
        description: First day of the week for calendar calculations
        default: monday
        enum:
          - monday
          - sunday
      oauth_redirect_port:
        type: number
        title: OAuth Redirect Port
        description: Port for local OAuth callback server
        default: 8085
        minimum: 1024
        maximum: 65535
    required: []
  commandFunction: |-
    (config) => ({
      command: 'npx',
      args: ['-y', '@temporal-cortex/cortex-mcp@0.5.1'],
      env: {
        ...(config.google_client_id && { GOOGLE_CLIENT_ID: config.google_client_id }),
        ...(config.google_client_secret && { GOOGLE_CLIENT_SECRET: config.google_client_secret }),
        ...(config.timezone && { TIMEZONE: config.timezone }),
        ...(config.microsoft_client_id && { MICROSOFT_CLIENT_ID: config.microsoft_client_id }),
        ...(config.microsoft_client_secret && { MICROSOFT_CLIENT_SECRET: config.microsoft_client_secret }),
        ...(config.week_start && { WEEK_START: config.week_start }),
        ...(config.tenant_id && { TENANT_ID: config.tenant_id }),
        ...(config.lock_ttl_secs && { LOCK_TTL_SECS: String(config.lock_ttl_secs) }),
        ...(config.oauth_redirect_port && { OAUTH_REDIRECT_PORT: String(config.oauth_redirect_port) }),
      },
    })
  exampleConfig:
    google_client_id: "your-client-id.apps.googleusercontent.com"
    google_client_secret: "your-client-secret"
